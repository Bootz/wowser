<characters class="characters screen">
  <div class="panel">
    <h1>Character Selection</h1>

    <div class="divider"></div>

    <p>
      At some point this screen will allow managing characters. Soonâ„¢
    </p>

    <form onsubmit="{ join }">
      <fieldset>
        <select name="selected">
          <option each="{ character, i in session.characters.list }" value="{ i }">
            { character.name }
          </option>
        </select>
      </fieldset>

      <div class="divider"></div>

      <input type="submit" value="Join world" autofocus />
      <input type="button" value="Refresh" onclick="{ refresh }" />
    </form>
  </div>

  <script>
    this.session = opts.session;

    this.session.characters.on('refresh', function() {
      this.update();
    }.bind(this));

    this.session.game.on('join', function() {
      this.parent.navigate('game');
    }.bind(this));

    refresh() {
      this.session.characters.refresh();
    }

    join() {
      var character = this.session.characters.list[this.selected.value];
      this.session.game.join(character);
    }

    this.on('mount', function() {
      this.refresh();
    });
  </script>
</characters>
